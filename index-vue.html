<!DOCTYPE html>
<html>
<head>
  <meta charset='utf-8'>
  <meta http-equiv='X-UA-Compatible' content='IE=edge'>
  <title>Justini - Just in time info display</title>
  <meta name='viewport' content='width=device-width, initial-scale=1'>
  <script src="https://unpkg.com/vue@3.0.1/dist/vue.global.js"></script>
  <link rel='stylesheet' type='text/css' media='screen' href='main.css'>
</head>
<body>
  <div id="app"></div>
    <script>
      const { createApp } = Vue

      const App = {
        data() {
          return {
            config: {
              lat: '59.90',
              lon: '10.79',
              alt: '49'
            },
            weather: {}
          }
        },
        methods: {
          getWeather(config) {
            let url = 'https://api.met.no/weatherapi/locationforecast/2.0/compact?lat=' + config.lat + '&lon=' + config.lon + '&altitude=' + config.alt
            fetch(url)
              .then(response => response.json())
              .then(data => {
                console.log(JSON.stringify(data))
                let weather = data.properties.timeseries.slice(0, 13)
                console.log('length: ' + weather.length)
                this.weather = data.properties.timeseries
              })
          }
        },
        mounted: function() {
          this.getWeather(this.config)
        },
        template: `<h1>Hello {{ weather[0] }}</h1>`,
      }

      createApp(App).mount("#app")
    </script>

</body>
</html>